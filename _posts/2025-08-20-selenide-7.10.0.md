---
layout: post
title: "Released Selenide 7.10.0"
description: ""
category:
header-text: "The second birthday of the video recorder"
tags: []
---
{% include JB/setup %}

Head õhtut!

On August 20, Estonia celebrates its second birthday – Independence Restoration Day.

In honor of the holiday we made a release [Selenide 7.10.0](https://github.com/selenide/selenide/milestone/227?closed=1).

Now it's our video recorder's second birthday too! (it's been heavily redesigned) 

* [Speed up the video recorder](#speed-up-video-recorder)
* [Screenshots for video recorder via BiDi or DevTools](#take-screenshots-using-bidi-or-devtools)
* [Compile-safe scrolling `$.scrollIntoView(options)`](#scroll-with-options)
* [Static methods for creating containers](#static-methods-for-containers-initialization)
* [`@DeepShadow` annotation](#deep-shadow-annotation)
* [Validation of `incrementTimeout`](#validate-increment-timeout)
* [Updated Selenium from 4.34.0 to 4.35.0](#update-to-selenium-4.35.0)

<br>

### Speed up the video recorder {#speed-up-video-recorder}

In the first versions of the video recorder, we used the `org.bytedeco:javacv` library to merge all captured screenshots into a video file.

It turned out that this is quite a slow method (and we were unable to speed it up).
Instead, it is much faster to save all screenshots to a folder and then run the `ffmpeg` command:
```shell
ffmpeg -i screenshot.%d.png
```

It works very quickly (in my tests - always less than a second). 

Important:
1. Now the video recorder requires `ffmpeg` to be installed on the computer.
2. The video file extension has changed from `webm` to `mp4`.

See [issue 3058](https://github.com/selenide/selenide/issues/3058), 
[PR 3071](https://github.com/selenide/selenide/pull/3071) for [PR 3079](https://github.com/selenide/selenide/pull/3079).

<br>

### Screenshots for video recorder via BiDi or DevTools {#take-screenshots-using-bidi-or-devtools}

Until now, the video recorder took screenshots using the standard webdriver method `TakesScreenshot.getScreenshotAs`.

There is a problem with it in Chrome: it steals the browser focus.
This creates a flickering effect when running several browsers in parallel, and theoretically can even cause flaky tests. 

_Look how fun this looks! :)_

#### BEFORE:
<center>
  <video width="500" autoplay controls loop muted src="{{ BASE_PATH }}/images/2025/08/video-recorder.before.mp4">
  </video>
</center>

**Now** we take screenshots in an alternative way:
* in Chromium browsers via `DevTools`,
* and in Firefox via `BiDi`.

It turned out that it works much faster, and the focus is not lost. 

#### AFTER:

<center>
  <video width="500" autoplay controls loop muted src="{{ BASE_PATH }}/images/2025/08/video-recorder.after.mp4">
  </video>
</center>

See [PR 3077](https://github.com/selenide/selenide/pull/3077).

<br>


### Compile-safe scrolling `$.scrollIntoView(options)` {#scroll-with-options}

Since ancient times, Selenide has had a method for scrolling:

```java
$.scrollIntoView("{block: \"end\"}");
$.scrollIntoView("{behavior: \"instant\", block: \"end\", inline: \"nearest\"}");
```

The problem is that this json parameter is from the JavaScript world.
You need to know its syntax or copy from somewhere, and it is easy to make a mistake in it.


Now a similar command can be written in Java with all its blackjack, autocomplete and syntax highlighting:

```java
$.scrollIntoView(instant().block(end));
$.scrollIntoView(instant().block(center).inline(nearest));
```

By the way,
* Both old `scrollIntoView` methods are now `@Deprecated`.
* The new API encourages the use of the `instant` option. It disables smooth scrolling which could sometimes cause unstable tests.

See [PR 3078](https://github.com/selenide/selenide/pull/3078).

<br>

### Static methods for creating containers {#static-methods-for-containers-initialization}

It's similar to method `page()` that allows creating page objects.
The new method `container()` allows creating `Container` instances:

```java
class PopupA implements Container {
  PopupB next() {
    return container("#popupb", PopupB.class);
  }
}

class PopupB implements Container {
  PopupA back() {
    return container("#popupa", PopupA.class);
  }
}
```

Thanks to [Ilya Koshaleu](https://github.com/groov1kk) for [PR 3053](https://github.com/selenide/selenide/pull/3053).

<br>

### `@DeepShadow` annotation {#deep-shadow-annotation}

In Selenide, we have the [shadowDeepCss](/2022/09/24/selenide-6.8.0/#deep-shadow-selectors) method for finding an element in several nested shadow doms.
Now the same search can be implemented in a page object using the new annotation `@DeepShadow`:

```java
class PageObject {
  @DeepShadow
  @FindBy(css = "#myelementid")
  private SelenideElement myElement;

  @DeepShadow
  @FindBy(css = ".my-elements")
  private List<SelenideElement> myElements;
}
```
Thanks to [Ilya Koshaleu](https://github.com/groov1kk) for [PR 3083](https://github.com/selenide/selenide/pull/3083).

<br>

### Validation of `incrementTimeout` {#validate-increment-timeout}
Now we check that `incrementTimeout` is not greater than the overall timeout for downloading the file.

Trying to call the method only with `incrementTimeout` parameter:
```java
$.download(using(FOLDER)
      .withTimeout(ofMillis(4000))
      .withIncrementTimeout(ofMillis(30_000)))
```

will immediately give an error:

```java
IllegalArgumentException:  
Timeout (30000 ms) must be greater than increment timeout (4000 ms)
```

See [PR 3093](https://github.com/selenide/selenide/pull/3093).

<br>

### Updated Selenium from 4.34.0 to 4.35.0 {#update-to-selenium-4.35.0}
And bumped CDP version from v138 to v139.   
And updated Appium from 9.5.0 to 10.0.0

Thanks to [Aliaksandr Rasolka](https://github.com/rosolko) for [PR 3087](https://github.com/selenide/selenide/pull/3087)


<br>

<center>
  <img src="{{ BASE_PATH }}/images/2023/08/restoration-independence-taasiseseisvumispaev-estonia.png" width="300"/>
</center>

[Andrei Solntsev](http://asolntsev.github.io/)

selenide.org
