---
layout: post
title: "Вышла Selenide 7.8.0"
description: ""
category:
header-text: "Эспрессо макиато!"
tags: []
---
{% include JB/setup %}

Mi amore, mi amore!  

Сегодня вечером мой _экстра_ зарелизил [Selenide 7.8.0](https://github.com/selenide/selenide/milestone/220?closed=1).

Интересно, мой _интра_ завтра утром откроет этот текст и узнает ли про новые возможности в Selenide?

* [Новые функции для Appium](#new-appium-functions)
* [Удалять фильтры из прокси](#remove-proxy-listeners)
* [Аннотация `@ShadowHost`](#shadow-host-in-page-objects)
* [Комбинированные атрибуты в отчётах](#improve-combined-attributes-in-reports)
* [Обновились на Selenium 4.30.0](#upgrade-to-selenium-4.30.0)
* [Новости](#news)

<br>

### Новые функции для Appium {#new-appium-functions}

Для фанатов мобилок мы добавили три функции:
* активировать приложение,
* остановить приложение,
* перезапустить приложение.

Все эти методы можете найти в классе `SelenideAppium`:

```java
import static com.codeborne.selenide.appium.SelenideAppium.*;

activateApp("com.saucelabs.mydemoapp.rn");

terminateApp("com.saucelabs.mydemoapp.rn");
terminateApp("com.saucelabs.mydemoapp.rn", ofSeconds(10)); // with timeout

relaunchApp("com.saucelabs.mydemoapp.rn");
relaunchApp("com.saucelabs.mydemoapp.rn", ofSeconds(20)); // with timeout
```

Спасибо [Aliaksandr Rasolka](https://github.com/rosolko) за [PR 2964](https://github.com/selenide/selenide/pull/2964).

<br>

### Удалять фильтры из прокси {#remove-proxy-listeners}

Ровно 7 лет назад мы добавили возможность добавлять [перехватчики запросов-ответов в селенидовский прокси](/2018/04/02/selenide-4.11/#proxy-filters).   
С их помощью вы могли логировать запросы, мокать или исправлять ответы сервера, добавлять заголовки, обходить авторизацию и даже [тестировать безопасность](/2019/12/07/advent-calendar-csrf-protection/). 

А теперь появилась возможность удалять эти фильтры.  
Это на тот случай, если вам нужен какой-то фильтр лишь в одном тесте, а в других он мешает. 

Как всегда, пример можете подсмотреть [в тестах самого селенида](https://github.com/selenide/selenide/blob/main/modules/proxy/src/test/java/integration/proxy/ProxyServerUsageTest.java):

```java
// добавляем фильтры
getSelenideProxy().addRequestFilter("proxy-usages.request", ...);
getSelenideProxy().addResponseFilter("proxy-usages.response", ...);

// ... тут ваш тест ...

// удаляем фильтры, которые больше не нужны
getSelenideProxy().removeRequestFilter("proxy-usages.request");
getSelenideProxy().removeResponseFilter("proxy-usages.response");
```

См. [PR 2981](https://github.com/selenide/selenide/pull/2981), а также [BUP 481](https://github.com/valfirst/browserup-proxy/pull/481/files).

<br>

### Аннотация `@ShadowHost` {#shadow-host-in-page-objects}

Лет 5 назад мы добавили [методы для работы с Shadow DOM](/2020/03/18/selenide-5.10.0/#add-shadow-dom-support).  
Они позволяли искать элементы внутри Shadow DOM через стандартный доллар:
```java
$(shadowCss("#anyButton", "#shadow-host")).click();
```

А потом добавили ещё и [рекурсивный поиск по shadow dom](/2022/09/24/selenide-6.8.0/#deep-shadow-selectors).

А теперь то же самое можно делать не только через доллар, но ещё и через аннотацию `@ShadowHost` в пэдж обжектах:

```java
class PageObject {
  @ShadowHost(@FindBy(id = "shadow-host"))
  @FindBy(css = "#inputInShadow")
  SelenideElement input;

  @ShadowRoot
  @FindBy(css = "#shadow-container")
  ShadowContainer shadowContainer;
}
```
Спасибо [Ilya Koshaleu](https://github.com/groov1kk) за [PR 2968](https://github.com/selenide/selenide/pull/2968).

<br>

### Причесали комбинированные атрибуты в отчётах {#improve-combined-attributes-in-reports}

Пару лет назад мы добавили [комбинированные атрибуты для мобилок](/2023/05/29/selenide-6.15.0/#conditions-for-mobile-apps).

> Почитайте [тот пресс-релиз](/2023/05/29/selenide-6.15.0/), вот же были времена, писали тексты!

А теперь мы заметили, что они не очень выглядят в отчётах, и подправили.  

Например, вот такая проверка:
```java
$.shouldHave(attribute(
  android("content-desc").ios("name"), 
  "Чёртова картошка по выходным"
));
```

Раньше выглядела в отчётах так:
```java
Element should have attribute 
  com.codeborne.selenide.appium.conditions.CombinedAttribute@47b530e0
     ="Чёртова картошка по выходным"
```

> Ну, ужас, но не ужас-ужас-ужас!

А теперь будет так:
```java
Element should have attribute @content-desc|@name="Чёртова картошка по выходным"
```

См. [issue 2967](https://github.com/selenide/selenide/issues/2967) и [PR 2971](https://github.com/selenide/selenide/pull/2971).

<br>

### Обновились на Selenium 4.30.0 {#upgrade-to-selenium-4.30.0}

Тут всё понятно, подняли Selenium с 4.29.0 до 4.30.0, в т.ч. подняли версию CDP с 133 до v134.

См. [PR 2979](https://github.com/selenide/selenide/pull/2979).

<br>

### Новости {#news}

* Пост [Selenide выпустил новую версию 7.7](https://dou.ua/forums/topic/51933/) от Артура Шевченко из Yalantis
* Видос [Selenide: Поиск элемента по имени класса](https://www.youtube.com/watch?v=NTHSvR1lfDY&ab_channel=QAAutomation%D0%B8SDET) на канале QA Automation и SDET
* Книга [Java Testing Toolbox](https://rieckpil.de/testing-tools-and-libraries-every-java-developer-must-know/) от Philip Riecks, в которой есть и глава про Selenide. 
* Видос [Selenium & Selenide с Нуля](https://www.youtube.com/watch?v=CC5wB4kKC8g&ab_channel=ITUNLOCKED) на канале IT UNLOCKED
* Пост [Про Selenide на корейском](https://www.jaenung.net/tree/6158)

<br>
<br>

Por favore, por favore, обновляйтесь!

<br>

[Андрей Солнцев](http://asolntsev.github.io/)

ru.selenide.org
